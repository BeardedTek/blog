var debounce=function(e,t,n){var a;return function(){var i=this,r=arguments,o=n&&!a;clearTimeout(a),a=setTimeout(function(){a=null,n||e.apply(i,r)},t||200),o&&e.apply(i,r)}};!function(e,t,n){"use strict";var a="modal",i="lightbox",r="-"+a+"-open",o=function(e){for(var n=t.getElementsByClassName("-"+a),i=n.length;i--;)e?(n[i].classList.add(r),"body"!==n[i].tagName.toLowerCase&&n[i].setAttribute("aria-hidden","true")):(n[i].classList.remove(r),n[i].removeAttribute("aria-hidden"));return!!e},l=function(e){var n,l=e.target.count,d=t.getElementById(a+"_"+l),s=t.getElementById(a+"_"+l+"_"+i);d&&(d.setAttribute("aria-hidden","true"),s.className=s.className.replace(i+"-on",""),o(!d.getAttribute("aria-hidden")),n=t.getElementById(d.returnId),t.body.classList.remove(r),n.focus())},d=function(e){var t=e.cloneNode(!0),n={};return t.className=a,t.setAttribute("style","position:fixed;visibility:hidden;transform: none"),e.parentElement.appendChild(t),n.width=t.clientWidth,n.height=t.clientHeight,e.parentElement.removeChild(t),n},s=function(){for(var e,n,i,r=t.getElementsByClassName(a),o=r.length;o--;)for(e=d(r[o]),i=(n=r[o].getElementsByClassName(a+"_iframe")).length;i--;)n[i].width=e.width,n[i].height=e.height},c=function(e){var t=e;return"body"!==e.tagName.toLowerCase()&&(e.modalSrc||(t=c(e.parentElement)),t)},u=function(e){e.preventDefault();var n=c(e.target);if(n){var l=n.count,s=a+"_"+l,u=a+"_"+i,m=t.getElementById(s),h=t.getElementById(s+"_"+i);m&&h&&(h.className.match(u+"-on")||(h.className+=" "+u+"-on"),m.setAttribute("aria-hidden","false"),function(e){var n,i,r;e.getElementsByClassName(a+"_iframe")[0]||((r=t.createElement("iframe")).addEventListener("load",function(){r.classList.add(a+"_iframe-on")},!1),r.src=e.modalSrc,r.className=a+"_iframe",n=d(e),r.width=n.width,r.height=n.height,r.setAttribute("frameborder",0),r.setAttribute("allowfullscreen",!0),i=t.getElementById(a+"_"+e.count+"_lnk_close"),e.insertBefore(r,i))}(m),o(!!m.getAttribute("aria-hidden")),t.body.classList.add(r),t.getElementById(a+"_"+l+"_title").focus())}},m=function(e){13!==e.which&&32!==e.which||(e.preventDefault(),u(e))},h=function(e){e.id=e.id||"modal_"+e.count+"_lnk",e.setAttribute("aria-controls",a+"_"+e.count);var t=e.tagName.toLowerCase();"button"!==t&&(e.setAttribute("aria-role","button"),e.addEventListener("keydown",m,!1)),e.tabIndex=0,e.addEventListener("click",u,!1)},g=function(e){var n=e.target;27===e.which&&l(e),9===e.which&&e.shiftKey&&n.classList.contains(a+"_title")&&(e.preventDefault(),t.getElementById(a+"_"+e.target.count+"_lnk_close").focus()),9!==e.which||e.shiftKey||n.classList.contains(a+"_lnk-close")&&(e.preventDefault(),t.getElementById(a+"_"+e.target.count+"_title").focus()),13!==e.which&&32!==e.which||n.classList.contains(a+"_lnk-close")&&(e.preventDefault(),l(e))},f=function(e,n,a){var i=t.createElementNS("http://www.w3.org/2000/svg","svg");if(i.classList.add(n),a){var r=t.createElementNS("http://www.w3.org/2000/svg","title");r.textContent=a,i.appendChild(r)}var o=t.createElementNS("http://www.w3.org/2000/svg","use");return o.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+e),i.appendChild(o),i},v=function(e){var n=t.createElement("section");n.id=a+"_"+e.count,n.count=e.count,n.returnId=e.id,n.className=a,n.setAttribute("aria-hidden","true"),n.setAttribute("aria-labelledby",a+"_"+e.count+"_title"),n.setAttribute("aria-describedby",a+"_"+e.count+"_desc"),n.setAttribute("role","dialog"),n.modalSrc=e.modalSrc,n.appendChild(function(e){var n=t.createElement("h1");return n.id=a+"_"+e.count+"_title",n.className=a+"_title",n.tabIndex=0,n.textContent=function(e){var t="",n=e.getElementsByTagName("img");return n&&n[0]&&(t=n[0].alt),e.getAttribute("data-modalTitle")||t||e.textContent}(e),n.count=e.count,n.addEventListener("keydown",g,!1),n}(e)),n.appendChild(f("icon-loading","svg-loading","Loading")),n.appendChild(f("icon-loading","svg-loading2","")),n.appendChild(function(e){var n=t.createElement("p");return n.id=a+"_"+e.count+"_desc",n.className=a+"_desc",n.tabIndex=0,n.innerHTML=e.getAttribute("data-modalDesc")||"Tab or Shift + Tab to move focus.",n.count=e.count,n.addEventListener("keydown",g,!1),n}(e)),n.appendChild(function(e){var n=t.createElement("a");return n.id=a+"_"+e.count+"_lnk_close",n.className=a+"_lnk-close",n.tabIndex=0,n.appendChild(f("icon-cross","svg-close","Close modal")),n.count=e.count,n.addEventListener("click",l,!1),n.addEventListener("keydown",g,!1),n}(e)),t.body.appendChild(n)};!function(o){var d;!function(e){a=e.modalName||a,i=e.lightboxClass||i,r=e.openClass?"-"+a+e.openClass:r}(o);var c,u,m,g=t.querySelectorAll("[data-"+a+"]");if(g){for(var f=g.length;f--;)d=!1,g[f].hasAttribute("href")&&(d=g[f].href),g[f].getAttribute("data-modal").length&&(d=g[f].getAttribute("data-modal")),d&&(g[f].modalSrc=d,g[f].count=f,h(g[f]),v(g[f]),c=g[f],m=void 0,u=c.count,(m=t.createElement("div")).id=a+"_"+u+"_"+i,m.className=a+"_"+i,m.count=u,m.returnId=c.id,m.addEventListener("click",l,!1),t.body.appendChild(m));e.addEventListener("resize",n(s,250,!1))}}({modalName:"modal",openClass:"-open",lightboxClass:"lightbox"})}(window,document,debounce);
